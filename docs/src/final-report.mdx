import TableOfContents from './components/TableOfContents';





# Untangled

<div className="print-only browser-cta">
  [View this document in your browser](https://untangled-lang.github.io/untangled/)
</div>

<div className="authors">
  <span>Nick Doan</span> <a href="mailto:hdoan02@tufts.edu">hdoan02@tufts.edu</a>
  <span>Luke Deen Taylor</span> <a href="mailto:luke.taylor@tufts.edu">luke.taylor@tufts.edu</a>
  <span>Duru Uğurlu</span> <a href="mailto:duru.ugurlu@tufts.edu">duru.ugurlu@tufts.edu</a>
  <span>Caleb Ledi</span> <a href="mailto:cledi01@tufts.edu">cledi01@tufts.edu</a>
  <span>Chloe Lam</span> <a href="mailto:clam08@tufts.edu">clam08@tufts.edu</a>
</div>




## Table of Contents
<TableOfContents afterId="table-of-contents" />




## Introduction

Most modern processors have multiple CPU cores that can perform concurrent computations;
parallelizing work across these cores can yield major performance gains. However, many modern
programming languages still emphasize single-threaded programming—where they do allow
multithreading, it is seldom ergonomic.

**Untangled** is a new programming language with first-class support for multithreading. It
encourages users to write highly parallelized programs by providing safe and easy-to-use primitives
and abstractions over multithreading.

Untangled is very useful for writing any kind of program that performs any CPU-heavy work that
doesn’t need to run strictly sequentially.




## Language tutorial

***Note:** this tutorial assumes basic familiarity with programming in a C-style language.*



### 0. Installation
Before we start coding, first we need to make sure that we have everything we need installed!

First, clone the Untangled source from GitHub:
```bash
git clone https://github.com/untangled-lang/untangled
cd untangled
```

Next, make sure you have `llvm@14.0.6`, and [`opam`](https://opam.ocaml.org/), and a recent version
of OCaml installed on your system.

Then, use `opam` to install Untangled’s dependencies:
```bash
opam install dune
opam install llvm.14.0.6
```

Finally, run `make` to build the Untangled compiler for your system.

If all goes well, you’ll see a file called `untangled.exe` appear in the repository root.



### 1. Hello, world!

Let’s write our first program with Untangled!

To get started, we’ll define a “thread definition” called `Main`. A `Main` thread definition is
the starting point of all Untangled programs (without it, your program would be invalid).

```untangled
thread_def Main {
  print("Hello, world!");
}
```
Save your file as `hello.unt` (“.unt” is the standard file extension for Untangled programs). To
compile this program, we’ll need to use the executable we built earlier:
```bash
./untangled.exe hello.unt -o hello
```
If all goes well, you should see an executable file called `hello` in your working directory. Just
run the file to run your program!
```bash
./hello
# you should see “Hello, world!”
```
Congrats on running your first Untangled program!



### 2. A more complex program

Untangled includes many of the language features you’re used to from other programming languages,
including loops, variables, and functions. To show them off, let’s write a program that checks
numbers from 2 to 20 for [primality](https://en.wikipedia.org/wiki/Prime_number).

```untangled
thread_def Main {
  // Control flow (for loops, conditionals) look like C/C++
  for (int num = 2; num <= 20; num++) {
    // Variables are statically typed and mutable
    bool is_prime = true;

    /* Check whether `num` is a prime number:
     * If any number 2..num-1 divides `num` evenly, then it’s not prime */
    for (int divisor = 2; divisor < num; divisor++) {
      if (num % divisor == 0) is_prime = false;
    }

    /* Report our results */
    if (is_prime) {
      // “print” only takes strings, but the standard library includes
      // common type conversion functions
      print(string_of_int(num) + " is prime\n");
    } else {
      // Strings support concatenation using “+”
      print(string_of_int(num) + " is not prime\n");
    }
  }
}
```

If you compile and run this program as before, you should see a report on which numbers are prime:
```bash
./untangled.exe fib.unt -o fib
./fib

# 2 is prime
# 3 is prime
# 4 is not prime
# ...
# 19 is prime
# 20 is not prime
```
